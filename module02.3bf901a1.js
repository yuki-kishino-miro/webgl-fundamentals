function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var t=globalThis,r={},a={},n=t.parcelRequire92cc;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire92cc=n);var o=n.register;o("blYoz",function(t,r){e(t.exports,"appendTask",()=>a);function a(e,t,r){let a=document.createElement("section");a.setAttribute("id",t);let n=document.createElement("h2");if(n.appendChild(document.createTextNode(e)),a.appendChild(n),r)a.appendChild(r);else{let e=document.createElement("p");e.appendChild(document.createTextNode("WebGL Context Creation Failed.")),a.appendChild(e)}document.body.appendChild(a)}}),o("gvPBi",function(t,r){e(t.exports,"initWebGLContext",()=>a);function a(e=500,t=500){let r=document.createElement("canvas");if(!r)return{canvas:null,gl:null};r.style.width=`${e}px`,r.style.height=`${t}px`;let a=window.devicePixelRatio;r.width=Math.round(e*a),r.height=Math.round(t*a);let n=r.getContext("webgl");return n?{canvas:r,gl:n}:(console.error("WebGL context creation error"),{canvas:null,gl:null})}}),o("2tjQH",function(t,r){e(t.exports,"createProgram",()=>l);var a=n("e9Cxs");function o(e,t,r){let a=e.createShader(t);return a?(e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))?a:(console.log(`Shader compiling error: ${e.getShaderInfoLog(a)}`),e.deleteShader(a),null):null}function l(e,t,r){let n=o(e,e.VERTEX_SHADER,t),l=o(e,e.FRAGMENT_SHADER,r);if(!n||!l)return null;let i=e.createProgram();return i?(e.attachShader(i,n),e.attachShader(i,l),e.linkProgram(i),e.deleteShader(n),e.deleteShader(l),e.getProgramParameter(i,e.LINK_STATUS))?((0,a.registerOnUnload)(()=>{e.deleteProgram(i)}),i):(console.log(`Shader Program error: ${e.getProgramInfoLog(i)}`),e.deleteProgram(i),null):(e.deleteShader(n),e.deleteShader(l),null)}}),o("e9Cxs",function(t,r){e(t.exports,"registerOnUnload",()=>n);let a=[];function n(e){a.push(e)}window.addEventListener("beforeunload",e=>{a.forEach(e=>{try{e()}catch(e){console.error(e)}}),a=[],console.log("unload")})});var l=n("blYoz"),i=n("gvPBi"),c=n("2tjQH");const s={translate:(e,t)=>[1,0,0,0,1,0,e,t,1],rotate(e){let t=Math.cos(e),r=Math.sin(e);return[t,-r,0,r,t,0,0,0,1]},scale:(e,t)=>(null==t&&(t=e),[e,0,0,0,t,0,0,0,1]),multiply(e,t){let r=e[0],a=e[1],n=e[2],o=e[3],l=e[4],i=e[5],c=e[6],s=e[7],u=e[8],d=t[0],f=t[1],m=t[2],x=t[3],g=t[4],p=t[5],h=t[6],E=t[7],A=t[8];return[d*r+f*o+m*c,d*a+f*l+m*s,d*n+f*i+m*u,x*r+g*o+p*c,x*a+g*l+p*s,x*n+g*i+p*u,h*r+E*o+A*c,h*a+E*l+A*s,h*n+E*i+A*u]}},u=2*Math.PI;var d=n("e9Cxs");const f=`
attribute vec2 a_position;

uniform mat3 u_transform;

void main() {
    vec2 position = (u_transform * vec3(a_position, 1)).xy;
    gl_Position = vec4(position, 0.0, 1.0);
}
`,m=`precision mediump float;

uniform vec3 u_color;

void main() {
    gl_FragColor = vec4(u_color, 1.0);
}
`;!function(){let e;let{canvas:t,gl:r}=(0,i.initWebGLContext)(500,500);if((0,l.appendTask)("Create animated squares: 1 rotated square, 1 translated square, 1 xy-scaled square","task01",t),!t||!r)return;let a=(0,c.createProgram)(r,f,m);if(!a)return;let n=r.getAttribLocation(a,"a_position"),o=r.getUniformLocation(a,"u_transform"),x=r.getUniformLocation(a,"u_color"),g=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,g),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-.25,-.25,.25,-.25,.25,.25,-.25,.25]),r.STATIC_DRAW),(0,d.registerOnUnload)(()=>{r.deleteBuffer(g)});let p=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),r.STATIC_DRAW),(0,d.registerOnUnload)(()=>{r.deleteBuffer(p)}),r.enable(r.CULL_FACE),r.frontFace(r.CCW),r.clearColor(0,0,0,1);let h=[{translate:{x:-.5,y:.5},rotate:0,scale:{x:1,y:1},colors:[1,0,0]},{translate:{x:-.5,y:-.5},rotate:0,scale:{x:1,y:1},colors:[0,1,0]},{translate:{x:.5,y:.5},rotate:0,scale:{x:1,y:1},colors:[0,0,1]}],E=1,A={x:1,y:1},_=e=>{h[0].rotate=(h[0].rotate+-(e/1e3*Math.PI))%u,h[1].translate.x+=e/1e3*E,h[1].translate.x>.5?(h[1].translate.x=.5,E*=-1):h[1].translate.x<-.5&&(h[1].translate.x=-.5,E*=-1);let t={x:e/1e3,y:e/1e3};h[2].scale.x+=t.x*A.x,h[2].scale.x>1?(h[2].scale.x=1,A.x*=-1):h[2].scale.x<0&&(h[2].scale.x=0,A.x*=-1),h[2].scale.y+=t.y*A.y,h[2].scale.y>1?(h[2].scale.y=1,A.y*=-1):h[2].scale.y<0&&(h[2].scale.y=0,A.y*=-1)},v=()=>{r.viewport(0,0,r.canvas.width,r.canvas.height),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.useProgram(a),r.enableVertexAttribArray(n),h.forEach(e=>{let{colors:t,translate:a,rotate:l,scale:i}=e,c=s.multiply(s.multiply(s.translate(a.x,a.y),s.rotate(l)),s.scale(i.x,i.y));r.uniformMatrix3fv(o,!1,c),r.uniform3fv(x,t),r.bindBuffer(r.ARRAY_BUFFER,g),r.vertexAttribPointer(n,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)})},y=null,R=t=>{void 0===e&&(e=t);let r=t-e;e=t,_(r),v(),y=window.requestAnimationFrame(R)};(0,d.registerOnUnload)(()=>{null!==y&&cancelAnimationFrame(y)}),y=window.requestAnimationFrame(R)}();